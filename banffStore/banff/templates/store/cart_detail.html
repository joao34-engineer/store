{% extends 'base/base.html' %}
{% block title %}Your cart{% endblock %}
{% block content %}
<h1>Your cart</h1>
<table>
  <thead><tr><th>Product</th><th>Qty</th><th>Price</th><th>Total</th><th></th></tr></thead>
  <tbody>
  {% for i in items %}
  <tr>
    <td><a href="{% url 'store:product_detail' i.product.slug %}">{{ i.product.name }}</a></td>
    <td>
      <form method="post" action="{% url 'store:update_cart_item' i.id %}">
        {% csrf_token %}
        <input type="number" min="0" name="quantity" value="{{ i.quantity }}"/>
        <button type="submit">Update</button>
      </form>
    </td>
    <td>${{ i.product.price }}</td>
    <td>${{ i.get_total_price }}</td>
    <td>
      <form method="post" action="{% url 'store:remove_from_cart' i.id %}">
        {% csrf_token %}
        <button type="submit">Remove</button>
      </form>
    </td>
  </tr>
  {% empty %}
  <tr><td colspan="5">Your cart is empty.</td></tr>
  {% endfor %}
  </tbody>
</table>
<p class="total">Cart total: ${{ total }}</p>
<p><a href="{% url 'store:checkout' %}">Proceed to checkout</a></p>
{% endblock %}
